const PRECACHE_URLS =
`manifest.json
./test.js
./index.js
./data.js
./index.html
./dancecontest/dance.swf
./dancecontest/index.html
./dancecontest/songs/songData5.swf
./dancecontest/songs/songData2.swf
./dancecontest/songs/songData1.swf
./dancecontest/songs/songData6.swf
./dancecontest/songs/songData4.swf
./dancecontest/songs/songData3.swf
./dancecontest/lang/en/locale.swf
./icefishing/title.swf
./icefishing/bootstrap.swf
./icefishing/index.html
./icefishing/canoworms.swf
./icefishing/IceFishing.swf
./icefishing/lang/en/locale.swf
./icejam/icejam.swf
./icejam/index.html
./src/7a7b47acdad52ed286ce.module.wasm
./src/core.ruffle.75408f40d9423287edd6.js
./src/ruffle.js.map
./src/ruffle.js
./src/core.ruffle.75408f40d9423287edd6.js.map
./cartsurfer/CartSurfer.swf
./cartsurfer/bootstrap.swf
./cartsurfer/index.html
./cartsurfer/lang/en/title.swf
./cartsurfer/lang/en/locale.swf
./cartsurfer/lang/pt/title.swf
./cartsurfer/lang/pt/locale.swf
./cartsurfer/lang/fr/title.swf
./cartsurfer/lang/fr/locale.swf
./cartsurfer/lang/ru/title.swf
./cartsurfer/lang/ru/locale.swf
./cartsurfer/lang/es/title.swf
./cartsurfer/lang/es/locale.swf
./cartsurfer/lang/de/title.swf
./cartsurfer/lang/de/locale.swf
./firewall/firewall_game.swf
./firewall/index.html
./firewall/src/7a7b47acdad52ed286ce.module.wasm
./firewall/src/core.ruffle.75408f40d9423287edd6.js
./firewall/src/ruffle.js.map
./firewall/src/ruffle.js
./firewall/src/core.ruffle.75408f40d9423287edd6.js.map
./tumblers/tumblers.swf
./tumblers/index.html
./mixmaster/MixMasterPlayback_Brazil.swf
./mixmaster/MixMaster_Drum_n_Bass1.swf
./mixmaster/MixMasterPlayback_Halloween.swf
./mixmaster/MixMasterPlayback_Reggae.swf
./mixmaster/MixMaster_OldSchool1.swf
./mixmaster/MixMasterPlayback_Funk.swf
./mixmaster/MixMaster_Funk1.swf
./mixmaster/MixMasterPlayback.swf
./mixmaster/MixMaster_Brazil1.swf
./mixmaster/MixMasterPlayback_South.swf
./mixmaster/MixMaster_Reggae1.swf
./mixmaster/MixMaster_Halloween.swf
./mixmaster/MixMasterPlayback_Drum.swf
./mixmaster/MixMasterPlayback_Oldschool.swf
./mixmaster/MixMaster_SouthAsian1.swf
./mixmaster/index.html
./mixmaster/MixMaster.swf
./mixmaster/ChooseSong.swf
./mixmaster/lang/en/locale.swf
./circuitmatch/circuitmatch_game.swf
./circuitmatch/index.html
./jetpack/JetpackAdventures.swf
./jetpack/bootstrap.swf
./jetpack/index.html
./jetpack/level1/level1_1.swf
./jetpack/level3/level3_2.swf
./jetpack/level3/level3_1.swf
./jetpack/level3/level3_3.swf
./jetpack/level4/level4_1.swf
./jetpack/level2/level2_3.swf
./jetpack/level2/level2_1.swf
./jetpack/level2/level2_2.swf
./jetpack/level5/level5_1.swf
./jetpack/lang/en/coffee.swf
./jetpack/lang/en/petshop.swf
./jetpack/lang/en/title.swf
./jetpack/lang/en/nightclub.swf
./jetpack/lang/en/ballooncoffee.swf
./jetpack/lang/en/landhere.swf
./jetpack/lang/en/java.swf
./jetpack/lang/en/cave.swf
./jetpack/lang/en/windgenerator.swf
./jetpack/lang/en/locale.swf
./jetpack/lang/en/giftshop.swf
./jetpack/lang/en/landsign.swf
./jetpack/lang/pt/coffee.swf
./jetpack/lang/pt/petshop.swf
./jetpack/lang/pt/title.swf
./jetpack/lang/pt/nightclub.swf
./jetpack/lang/pt/ballooncoffee.swf
./jetpack/lang/pt/landhere.swf
./jetpack/lang/pt/java.swf
./jetpack/lang/pt/cave.swf
./jetpack/lang/pt/windgenerator.swf
./jetpack/lang/pt/locale.swf
./jetpack/lang/pt/giftshop.swf
./jetpack/lang/pt/landsign.swf
./jetpack/lang/fr/coffee.swf
./jetpack/lang/fr/petshop.swf
./jetpack/lang/fr/title.swf
./jetpack/lang/fr/nightclub.swf
./jetpack/lang/fr/ballooncoffee.swf
./jetpack/lang/fr/landhere.swf
./jetpack/lang/fr/java.swf
./jetpack/lang/fr/cave.swf
./jetpack/lang/fr/windgenerator.swf
./jetpack/lang/fr/locale.swf
./jetpack/lang/fr/giftshop.swf
./jetpack/lang/fr/landsign.swf
./jetpack/lang/ru/coffee.swf
./jetpack/lang/ru/petshop.swf
./jetpack/lang/ru/title.swf
./jetpack/lang/ru/nightclub.swf
./jetpack/lang/ru/ballooncoffee.swf
./jetpack/lang/ru/landhere.swf
./jetpack/lang/ru/java.swf
./jetpack/lang/ru/cave.swf
./jetpack/lang/ru/windgenerator.swf
./jetpack/lang/ru/locale.swf
./jetpack/lang/ru/giftshop.swf
./jetpack/lang/ru/landsign.swf
./jetpack/lang/es/coffee.swf
./jetpack/lang/es/petshop.swf
./jetpack/lang/es/title.swf
./jetpack/lang/es/nightclub.swf
./jetpack/lang/es/ballooncoffee.swf
./jetpack/lang/es/landhere.swf
./jetpack/lang/es/java.swf
./jetpack/lang/es/cave.swf
./jetpack/lang/es/windgenerator.swf
./jetpack/lang/es/locale.swf
./jetpack/lang/es/giftshop.swf
./jetpack/lang/es/landsign.swf
./jetpack/lang/de/coffee.swf
./jetpack/lang/de/petshop.swf
./jetpack/lang/de/title.swf
./jetpack/lang/de/nightclub.swf
./jetpack/lang/de/ballooncoffee.swf
./jetpack/lang/de/landhere.swf
./jetpack/lang/de/java.swf
./jetpack/lang/de/cave.swf
./jetpack/lang/de/windgenerator.swf
./jetpack/lang/de/locale.swf
./jetpack/lang/de/giftshop.swf
./jetpack/lang/de/landsign.swf
./beancounters/BeanCounters.swf
./beancounters/index.html
./assets/shrimp.png
./assets/horn.png
./rhythmhack/rhythmhack.swf
./rhythmhack/index.html
./rhythmhack/lang/en/locale.swf
./rhythmhack/lang/pt/locale.swf
./rhythmhack/lang/fr/locale.swf
./rhythmhack/lang/ru/locale.swf
./rhythmhack/lang/es/locale.swf
./rhythmhack/lang/de/locale.swf`
.replace(/(\r\n|\n|\r)/gm, "").split("./")

const PRECACHE = 'precache-v2';
const RUNTIME = 'runtime';

self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(PRECACHE)
      .then(cache => cache.addAll(PRECACHE_URLS))
      .then(self.skipWaiting())
  );
});


self.addEventListener('activate', event => {
  const currentCaches = [PRECACHE, RUNTIME];
  event.waitUntil(
    caches.keys().then(cacheNames => {
      return cacheNames.filter(cacheName => !currentCaches.includes(cacheName));
    }).then(cachesToDelete => {
      return Promise.all(cachesToDelete.map(cacheToDelete => {
        return caches.delete(cacheToDelete);
      }));
    }).then(() => self.clients.claim())
  );
});

self.addEventListener('fetch', event => {
  if (event.request.url.startsWith(self.location.origin)) {
    event.respondWith(
      caches.match(event.request).then(cachedResponse => {
        if (cachedResponse) {
          return cachedResponse;
        }

        return caches.open(RUNTIME).then(cache => {
          return fetch(event.request).then(response => {
            return cache.put(event.request, response.clone()).then(() => {
              return response;
            });
          });
        });
      })
    );
  }
});
